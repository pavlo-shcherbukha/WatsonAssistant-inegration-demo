# Интеграционные решения с использованием Watson Assistant

<!-- TOC BEGIN -->

1. [Цель работы](#p1)
1. [Возможные инструметы интеграции с Watson Assistant](#p2)
1. [Интеграция c помощью IBM Cloud Functions ](#p3)
1. [Интеграция с помощью Custom Application](#p4)
1. [Пример комплексной интеграции](#p5)

<!-- TOC END -->

<a name="p1"></a>
## Цель работы
Целью этой работы является построение модели виртуального ассистента на базе Watson Assistant с использованием нескольких вариантов интеграции.

<a name="p2"></a>
## Возможные инструменты интеграции с Watson Assistant

Возможные варианты интеграции с Watson Assistant показаны на фото:

<kbd><img src="doc/wa-pic-1.png" /></kbd>
<p style="text-align: center;">pic-1</p>

В этой работе мы рассмотрим интеграцию с помощью IBM Cloud Functions
<kbd><img src="doc/wa-pic-2.png" /></kbd>
<p style="text-align: center;">pic-2</p>

и через Custom integration - через клиентское приложение:.

<kbd><img src="doc/wa-pic-3.png" /></kbd>
<p style="text-align: center;">pic-3</p>

Пример встраивания Watson Assistant в существующую архитектуру банка показан на фото:
<kbd><img src="doc/wa-pic-4.png" /></kbd>
<p style="text-align: center;">pic-4</p>

<a name="p3"></a>
## Интеграция с помощью IBM Cloud Functions

Удобным способом вызова внешних сервисов из Watson Assistant являются IBM Cloud Functions. Вызов такой функции выполняется прямо из диалога Watson Assistant с помощью параметров в JSON-обьекте диалога. На фото показан пример вызова такой функции в дереве диалога:

<kbd><img src="doc/wa-pic-5.png" /></kbd>
<p style="text-align: center;">pic-5</p>

Для вызова нужно:

- создать контекстную переменную с правами доступа для вашего IBM Cloud Functions Namespace:

<kbd><img src="doc/wa-pic-6.png" /></kbd>
<p style="text-align: center;">pic-6</p>

- Оформить вызов функции:

<kbd><img src="doc/wa-pic-7.png" /></kbd>
<p style="text-align: center;">pic-7</
p>

Готово! Watson Assistant готов отправлять запросы во внешнюю функцию (такая функция должна уже существовать).
Функция может возвращать иерархический набор данных. Как получить доступ к возвращаемым данным - показано на фото:

<kbd><img src="doc/wa-pic-8.png" /></kbd>
<p style="text-align: center;">pic-8</p>

<a name="p4"></a>
## Интеграция через Custom Application

Для разработки интеграции со специфическими требованиями предоставляются SDK для большинства популярных платформ:

 <kbd><img src="doc/wa-pic-9.png" /></kbd>
<p style="text-align: center;">pic-9</p>

Ваш приложение может быть размещено как в облаке, так и on-Premises. Вы можете использовать один из двух вариантов интерфейса API  интеграции с Watson Assistant:

- v1: универсальный и широкий. С его помощью можно программно создавать и обновлять skill;

- v2: защищенный интерфейс только для обмена сообщениями. Имеет идентификатор сессии чата.

Такая интеграция необходима для разработки специфического интерфейса, вызовов дополнительных сервисов или интеграции с социальными сетями.

<a name="p5"></a>
## Пример комплексной интеграции.

В качестве примера случая комплексной интеграции - (поддержка аутентификации пользователя во внутренней системе с использованием технологий OAuth 2.0) приведен пример с использованием сервиса IBM Cloud App-ID, который позволяет быстро и легко добавить такую аутентификацию в Web и мобильные приложения.

 <kbd><img src="doc/wa-pic-10.png" /></kbd>
<p style="text-align: center;">pic-10</p>

показан workflow процесса аутентификации.
